# Aquidneck Island Traffic Demand Model

Initial demand is based on either the 2015 or 2025 RISM projections.

Before calibrating or running a simulation, the trip and route files must be generated by running `ai_model_tripgen.py` or `ai_model_tripgen_parallel.py` (for parallel processing.)

By default, 10 trips are generated with randomization to allow for different runs with the same base inputs.

## Calibration
The routes computed from the RISM OD matrices can be calibrated using the calibration references based on RIDOT traffic counts.  An example calibration call:

```
python <repo_directory>/tools/modifiedRouteSampler.py \
    -r ../scenarios/aquidneck_island_traffic_model/route_files/ai15_run0.rou.xml \
    --edgedata-files ../scenarios/aquidneck_island_traffic_model/calibration/weekday_survey_2019.xml \
    --optimize 20 \
    --optimize-input \
    -a "type='hbnwCar'" \
    --verbose \
    --write-route-ids \
    --mismatch-output ../scenarios/aquidneck_island_traffic_model/logs/calibration_logs.txt \
    -o ../scenarios/aquidneck_island_traffic_model/route_files/ai15_run0_weekday_calibrated.xml
```

## Output processing

Convert xml files to csv using `<SUMO_HOME>/tools/xml/xml2csv` and include the `--xsd` tag to use the corresponding xml schema from `<SUMO_HOME>/data/xsd/<output_file_type>.xsd`.
